# Post-installation Guide for `dcslab-os-env`

## Preparig Debug Console

### Identifying Serial Device

You can access your device using serial console on ARTIK10. Connect the device to your PC and use the following command to find the device name.

```bash
dmesg | grep tty --color=always | tail
```

The command will highlight the name of the device, such as `ttyUSB0` or `ttyS0`.

### Testing

Execute the following command, like `console /dev/ttyUSB0` or `console /dev/ttyS0`. (Docker users must use this command inside the container.)

```bash
console /dev/<DEVICE>
```

Push reset button on ARTIK10 device and then press power button for 1 second. If you can see boot messages on screen, you've found the right device name. Type <kbd>Ctrl</kbd>+<kbd>a</kbd>, <kbd>d</kbd> to close the console.

### Setting Alias

You may skip this part if the device name is `ttyUSB0`.

Type the following command to set the found device name as default. (Change `<DEVICE>` to the appropriate device name for you.)

```bash
echo 'alias console="console /dev/<DEVICE> --try-resume"' >> ~/.bashrc
source ~/.bashrc
```

(If you are not using `bash`, consult the documentation for your shell for setting alias.)

## Commands

Here's the list of commands you can use for kernel development. (Docker users must use this command inside the container.)

[Project 0 documentation](/doc/Project0.md) provides step-by-step guilde for building kernel image and flashing the device. So please don't get overwhelmed by the number of commands. Skimming the list with a light heart is sufficient for doing the Project 0.

### `git`

Git is a version control software. Using git, you can

* download kernel source
* record and publish your changes
* track contributions from other teammates

For documentation about git, visit [here](https://git-scm.com/doc).

### `console`

Usage:
```bash
console
```

Opens debug console session using [screen](https://www.gnu.org/software/screen/).

Inside screen session,

* Type <kbd>Ctrl</kbd>+<kbd>a</kbd>, <kbd>d</kbd> to temporary detach screen and return to the shell. You can resume screen by the command `console`.
* Type <kbd>Ctrl</kbd>+<kbd>a</kbd>, <kbd>k</kbd> and <kbd>y</kbd> to kill the session and return to the shell. You can restart session by the command `console`.

### `build`

Usage:
```bash
build
```

Compiles kernel source and generates `image.tar` in the root directory of kernel source. You can use this command in any subdirectories of kernel source tree.

### `flash`

Usage:
```bash
flash
```

Flashes the ARTIK10 device using `image.tar` generated by `build` command. You can use this command in any subdirectories of kernel source tree.

ARTIK10 device must be in `thordown` mode when using the command.

### `pull`

Usage:
```bash
pull <remote> <local>
```
or
```bash
pull <remote>
```

Copy file or directory from the device. 

The command is implemeted using [sdb](https://developer.tizen.org/development/tools/common-tools/smart-development-bridge?langswitch=en). `sdbd` must be running on ARTIK10 device when using the command.

### `push`

Usage:
```bash
push <local> <remote>
```

Copy file or directory to the device.

The command is implemeted using [sdb](https://developer.tizen.org/development/tools/common-tools/smart-development-bridge?langswitch=en). `sdbd` must be running on ARTIK10 device when using the command.

### `shell`

Usage:
```bash
shell
```

Run remote shell on the device.

Usage:
```bash
shell <command>
```

Run command in the remote shell.

The command is implemeted using [sdb](https://developer.tizen.org/development/tools/common-tools/smart-development-bridge?langswitch=en). `sdbd` must be running on ARTIK10 device when using the command.

### `root`

Usage:
```bash
root
```

Switch to root account.

Usage:
```bash
root --off
```

Switch to user account.

The command is implemeted using [sdb](https://developer.tizen.org/development/tools/common-tools/smart-development-bridge?langswitch=en). `sdbd` must be running on ARTIK10 device when using the command. Account status affects `push`, `pull`, and `shell` commands.

## Advanced Usages

### `build --clean`

The command `build --clean` cleans source tree and then builds the kernel.

### `console`

* `console <DEVICE>`
    * Closes all debug console sessions (if any)
    * Opens debug console session on `<DEVICE>`
* `console <DEVICE> --try-resume`
    * Try to resume existing debug console session if possible
    * Otherwise, opens debug console session on `<DEVICE>`
* The command `console` is equivalent to `console /dev/ttyUSB0 --try-resume`. Aliases can override this behavior.
